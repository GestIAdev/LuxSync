# âš’ï¸ WAVE 2040.24: THE ZONAL RECONSTRUCTION
## AuditorÃ­a Forense de Zonas, Roles y Selectores

**Fecha**: 2026-02-14  
**Autor**: PunkOpus (Architect/Engine)  
**Solicitado por**: Radwulf (vÃ­a PunkGemini)  
**ClasificaciÃ³n**: ARQUITECTURAL â€” ReestructuraciÃ³n de cimientos  

---

## ğŸ“‹ ÃNDICE

1. [Autopsia: Estado Actual del Desastre](#1-autopsia)
2. [Mapa de ConfusiÃ³n SemÃ¡ntica](#2-confusiÃ³n-semÃ¡ntica)
3. [Inventario de Zonas por Subsistema](#3-inventario)
4. [DiagnÃ³stico de los 3 Bugs Reportados](#4-diagnÃ³stico)
5. [Referencia: CÃ³mo lo Hace grandMA3](#5-referencia-grandma3)
6. [Propuesta de UnificaciÃ³n](#6-propuesta)
7. [Plan de ImplementaciÃ³n (Original)](#7-plan)
8. [El Mundo de las Vibes: AuditorÃ­a de Impacto Zonal](#8-vibes)
9. [Plan de ImplementaciÃ³n Actualizado (Con Vibes)](#9-plan-updated)

---

## 1. AUTOPSIA: ESTADO ACTUAL DEL DESASTRE {#1-autopsia}

### 1.1 El Problema en una Frase

> **LuxSync tiene 4 sistemas de zonas distintos que no hablan entre sÃ­, con 3 formatos de nomenclatura incompatibles y sin concepto de "rol" o "subselecciÃ³n".**

### 1.2 ArqueologÃ­a â€” Los 4 Sistemas de Zonas

| # | Sistema | Archivo | Formato | Ejemplo |
|---|---------|---------|---------|---------|
| 1 | **Backend Legacy** | `main.ts` `FixtureZone` | `SCREAMING_CASE` | `FRONT_PARS`, `MOVING_LEFT` |
| 2 | **ShowFile V2** | `ShowFileV2.ts` `FixtureZone` | Mix `SCREAMING` + `kebab-case` | `FRONT_PARS`, `ceiling-left` |
| 3 | **Effect System** | `effects/types.ts` `EffectZone` | `camelCase` / `snake_case` | `movers_left`, `frontL`, `backR` |
| 4 | **Simulator** | `StageSimulator2.tsx` | `lowercase` | `front`, `back`, `left`, `right`, `center` |

### 1.3 El Flujo del Dolor

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     EL VIAJE DE UNA ZONA                                â”‚
â”‚                                                                         â”‚
â”‚  StageConstructor         main.ts            TitanOrchestrator          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ User picks â”‚      â”‚ autoAssign   â”‚     â”‚ fixtureMatchesZoneâ”‚        â”‚
â”‚  â”‚ MOVING_LEFTâ”‚â”€â”€â”€â”€â”€â–¶â”‚ Zone()       â”‚â”€â”€â”€â”€â–¶â”‚ 60+ case switch   â”‚        â”‚
â”‚  â”‚ (dropdown) â”‚      â”‚ FixtureZone  â”‚     â”‚ with .includes()  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                    â”‚                    â”‚
â”‚                                                    â–¼                    â”‚
â”‚  Hephaestus           EffectRegistry         StageSimulator2           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ZoneSelectorâ”‚     â”‚ EffectZone   â”‚     â”‚ zoneMap{} manual  â”‚        â”‚
â”‚  â”‚ movers_left â”‚     â”‚ movers_left  â”‚     â”‚ MOVING_LEFTâ†’left  â”‚        â”‚
â”‚  â”‚ (chip UI)   â”‚     â”‚ front, back  â”‚     â”‚ ceiling-leftâ†’left â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                         â”‚
â”‚  RESULTADO: Cada subsistema traduce a su antojo.                       â”‚
â”‚  NO HAY UNA FUENTE DE VERDAD ÃšNICA.                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. MAPA DE CONFUSIÃ“N SEMÃNTICA {#2-confusiÃ³n-semÃ¡ntica}

### 2.1 Â¿QuÃ© es "Front"?

| Componente | "Front" significa... | Incluye movers? | Incluye strobes? |
|------------|---------------------|-----------------|------------------|
| `main.ts` autoAssignZone | `FRONT_PARS` (solo PARs) | âŒ No | âŒ No |
| `TitanOrchestrator` fixtureMatchesZone | `front_pars` âˆ¨ `floor-front` | âŒ No | âŒ No |
| `StageSimulator2` zoneMap | Cualquiera con `FRONT` en el nombre | âŒ No | âŒ No |
| `ZoneSelector` (Heph UI) | `front` (EffectZone) | âŒ No | âŒ No |
| **Expectativa del usuario** | "Las luces de adelante" | **â“ Depende** | **â“ Depende** |

### 2.2 Â¿QuÃ© es "L" y "R"?

| Componente | L/R se determina por... | Â¿Funciona para PARs? |
|------------|------------------------|---------------------|
| `main.ts` autoAssignZone | **Contador modular** (`moving++; evenâ†’LEFT, oddâ†’RIGHT`) | âŒ Solo movers |
| `ShowFileV2.ts` FixtureZone | **AsignaciÃ³n manual** (`MOVING_LEFT`, `MOVING_RIGHT`) | âŒ Solo movers |
| `TitanOrchestrator` Stereo | **Position X** del StageBuilder (`x < 0 = LEFT`) | âœ… SÃ­ |
| `ZoneSelector` (Heph) | `movers_left` / `movers_right` | âŒ Solo movers |
| **Expectativa del usuario** | "Las luces del lado izquierdo/derecho" | âœ… Todas |

### 2.3 Â¿QuÃ© es un "Rol"?

**No existe.** LuxSync no tiene concepto de "rol". La propiedad `fixture.type` (e.g. `moving-head`, `par`, `strobe`) es lo mÃ¡s cercano, pero:

- Se usa para autoAsignar zona (heurÃ­stica)
- No se expone al usuario como selector
- No se puede usar en Hephaestus ni Chronos
- No distingue entre "wash mover" y "spot mover"

### 2.4 Â¿QuÃ© es "Even/Odd"?

**No existe como selector.** Solo existe como heurÃ­stica interna para auto-asignar L/R:

```typescript
// main.ts:210-212 â€” ÃšNICO lugar donde even/odd se usa
const currentCount = zoneCounters.moving
zoneCounters.moving++
const zone = currentCount % 2 === 0 ? 'MOVING_LEFT' : 'MOVING_RIGHT'
```

**No hay ningÃºn mecanismo para que un efecto o clip seleccione "fixtures pares" o "fixtures impares" dentro de una zona.**

---

## 3. INVENTARIO DE ZONAS POR SUBSISTEMA {#3-inventario}

### 3.1 Backend: `main.ts` â€” `FixtureZone` (Auto-Assignment)

```typescript
type FixtureZone = 'FRONT_PARS' | 'BACK_PARS' | 'MOVING_LEFT' | 'MOVING_RIGHT' 
                 | 'STROBES' | 'LASERS' | 'UNASSIGNED'
```

**LÃ³gica**: Counter-based. Parchea fixtures al hacer load del .luxshow.  
**Problema**: Es un REEMPLAZO de la zona del .luxshow, NO una lectura.

### 3.2 ShowFile V2: `ShowFileV2.ts` â€” `FixtureZone` (Persistence)

```typescript
type FixtureZone = 
  | 'FRONT_PARS' | 'BACK_PARS' | 'FLOOR_PARS'           // PARs
  | 'MOVING_LEFT' | 'MOVING_RIGHT'                        // Movers  
  | 'AIR' | 'AMBIENT' | 'CENTER'                          // Specials
  | 'stage-left' | 'stage-right' | 'stage-center'         // Legacy
  | 'ceiling-front' | 'ceiling-back'                       // Legacy
  | 'ceiling-left' | 'ceiling-right' | 'ceiling-center'   // Legacy
  | 'floor-front' | 'floor-back'                           // Legacy
  | 'truss-1' | 'truss-2' | 'truss-3'                    // Legacy
  | 'custom' | 'unassigned'                                // Catch-all
```

**Total: 20 valores posibles, 2 formatos de naming.**  
**Problema**: Mix de `SCREAMING_CASE` (V2) con `kebab-case` (legacy). Ambos coexisten.

### 3.3 StageConstructor UI: `StageConstructorView.tsx` â€” `ZONES_V2`

```typescript
const ZONES_V2 = [
  { value: 'FRONT_PARS',   label: 'ğŸ”´ FRONT (Main)' },
  { value: 'BACK_PARS',    label: 'ğŸ”µ BACK (Counter)' },
  { value: 'FLOOR_PARS',   label: 'â¬‡ï¸ FLOOR (Uplight)' }, 
  { value: 'MOVING_LEFT',  label: 'ğŸï¸ MOVER LEFT' },
  { value: 'MOVING_RIGHT', label: 'ğŸï¸ MOVER RIGHT' },
  { value: 'AIR',          label: 'âœ¨ AIR (Laser/Atmosphere)' },
  { value: 'AMBIENT',      label: 'ğŸŒ«ï¸ AMBIENT (House)' },
  { value: 'CENTER',       label: 'âš¡ CENTER (Strobes/Blinders)' }
]
```

**Total: 8 zonas.** Limpia, pero NO COINCIDE con `EffectZone`.

### 3.4 Effect System: `effects/types.ts` â€” `EffectZone` 

```typescript
type EffectZone = 
  | 'all'
  | 'front' | 'back'
  | 'frontL' | 'frontR' | 'backL' | 'backR'    // Stereo PARs
  | 'movers' | 'movers_left' | 'movers_right'  // Movers
  | 'pars'                                       // All PARs
```

**Total: 11 valores.** `camelCase` y `snake_case` mezclados.  
**No existe**: `air`, `ambient`, `center`, `strobes`, `lasers`.

### 3.5 Hephaestus ZoneSelector: `ZoneSelector.tsx` â€” `HEPH_ZONES`

```typescript
const HEPH_ZONES = [
  { id: 'movers_left',  label: 'L' },
  { id: 'movers_right', label: 'R' },
  { id: 'front',        label: 'FRONT' },
  { id: 'back',         label: 'BACK' },
  { id: 'movers',       label: 'AIR' },      // âš ï¸ CONFUSIÃ“N: "AIR" = "movers"?!
  { id: 'pars',         label: 'PARS' },
]
```

**Total: 6 opciones.** Usa `EffectZone` IDs.  
**BUG SEMÃNTICO**: `movers` se muestra como "AIR". Son conceptos distintos.  
**FALTA**: `all`, stereo PARs (`frontL/R`, `backL/R`), `center`, `ambient`.

### 3.6 Hephaestus Radar Preview: `useHephPreview.ts`

```typescript
const MULTI_ZONE_LAYOUT = [
  { zone: 'front',        label: 'F',  x: 0.5, y: 0.8 },
  { zone: 'back',         label: 'B',  x: 0.5, y: 0.2 },
  { zone: 'movers_left',  label: 'ML', x: 0.15, y: 0.5 },
  { zone: 'movers_right', label: 'MR', x: 0.85, y: 0.5 },
]
```

**Total: 4 zonas simuladas.** Hardcodeado. No lee del .luxshow.

### 3.7 StageSimulator2: `StageSimulator2.tsx`

```typescript
type zone = 'front' | 'back' | 'left' | 'right' | 'center'
```

**Total: 5 zonas visuales.** Con mapa manual de traducciÃ³n:
```typescript
const zoneMap = {
  'FRONT_PARS': 'front', 'BACK_PARS': 'back',
  'MOVING_LEFT': 'left', 'MOVING_RIGHT': 'right',
  'STROBES': 'center', 'ceiling-left': 'left', ...
}
```

### 3.8 TitanOrchestrator Merger: `fixtureMatchesZone()`

**60+ lÃ­neas de switch/case** traduciendo entre EffectZone y FixtureZone:

```typescript
case 'front':    return fz === 'front_pars' || fz === 'floor-front'
case 'frontl':   return fz === 'front_pars' || fz === 'floor-front'  // âš ï¸ MISMO que 'front'!
case 'frontr':   return fz === 'front_pars' || fz === 'floor-front'  // âš ï¸ MISMO que 'front'!
case 'movers':   return fz.startsWith('moving') || fz.startsWith('ceiling')
case 'left':     return fz === 'moving_left' || fz === 'ceiling-left'
```

**BUG CONFIRMADO**: `frontl` y `frontr` hacen EXACTAMENTE LO MISMO que `front`. No hay filtro L/R real para PARs (sin `fixtureMatchesZoneStereo`).

---

## 4. DIAGNÃ“STICO DE LOS 3 BUGS REPORTADOS {#4-diagnÃ³stico}

### 4.1 BUG: "Seleccionar PARES afecta a TODAS las fixtures"

**Root Cause**: No existe concepto de "even/odd" en ningÃºn nivel.

```
User selects "even" in some UI â”€â”€â–¶ ???
                                     â”‚
No hay:                              â”‚
  - EffectZone 'even'               â”‚
  - HephAutomationClip.parity       â”‚
  - TitanOrchestrator even/odd logicâ”‚
                                     â”‚
Result: Clip applies to ALL fixtures in zone â”€â”€â–¶ Bug
```

**Arquitecturalmente**: El pipeline `HephRuntime â†’ tick() â†’ outputs â†’ Merger â†’ fixtureMatchesZone()` opera a nivel de ZONA, no de FIXTURE INDEX. No hay ningÃºn punto donde se pueda decir "aplica solo a fixtures con Ã­ndice par dentro de esta zona".

**Donde deberÃ­a estar**: En el Merger, al iterar las fixtures de una zona:

```typescript
// LO QUE FALTA (pseudocÃ³digo):
fixtureStates = fixtureStates.map((f, globalIndex) => {
  const zoneFixtures = fixtureStates.filter(fx => matchesZone(fx, targetZone))
  const indexInZone = zoneFixtures.indexOf(f)
  
  if (clip.parity === 'even' && indexInZone % 2 !== 0) return f  // Skip
  if (clip.parity === 'odd'  && indexInZone % 2 === 0) return f  // Skip
  
  // Apply effect...
})
```

### 4.2 BUG: "Seleccionar L o R afecta tambiÃ©n a pares"

**Root Cause**: `fixtureMatchesZone()` tiene un mapeo correcto para `movers_left`/`movers_right` pero el ZoneSelector muestra "L"/"R" sin especificar que es SOLO MOVERS.

```
User clicks "L" â”€â”€â–¶ zone = 'movers_left'
                         â”‚
TitanOrchestrator:       â”‚
  case 'movers_left':    â”œâ”€â”€â–¶ ONLY matches MOVING_LEFT/ceiling-left âœ…
                         â”‚
PERO: Si el fixture es   â”‚
  FRONT_PARS y estÃ¡ en   â”‚
  position.x < 0...      â”œâ”€â”€â–¶ NO MATCH âœ… (correcto, solo movers)
```

**Espera... entonces este bug NO deberÃ­a ocurrir con la lÃ³gica actual.** A menos que:

1. La zona del fixture sea `stage-left` (legacy) â†’ `fixtureMatchesZone` no la reconoce â†’ devuelve `false` â†’ NO aplica. âœ…
2. La zona del fixture sea `MOVING_LEFT` â†’ `fixtureMatchesZone` reconoce â†’ aplica solo a movers izquierdos. âœ…
3. **HIPÃ“TESIS**: El fixture tiene zona `stage-right` (de tu .luxshow) y el mapping lo traduce incorrectamente.

**VerificaciÃ³n necesaria**: Â¿QuÃ© zona tienen tus fixtures reales en el .luxshow activo? Tu archivo de test tiene `zone: "stage-right"` que es LEGACY y no matchea con NADA en `fixtureMatchesZone()` â†’ el efecto NO SE APLICA â†’ luces en negro.

**ESTO EXPLICA POR QUÃ‰ TODO VA A TODAS**: Si el clip tiene `zones: []` (vacÃ­o = ALL), entonces ignora completamente el targeting.

### 4.3 BUG: "Stereo visual vs real no coincide"

**Root Cause**: Tres mecanismos distintos deciden L/R:

| Mecanismo | DÃ³nde | CÃ³mo decide L/R |
|-----------|-------|-----------------|
| Auto-assign | `main.ts` | Counter even/odd (`moving++ % 2`) |
| Manual assign | `StageConstructor` | User elige `MOVING_LEFT` o `MOVING_RIGHT` |
| Stereo routing | `TitanOrchestrator` | `position.x < 0` del StageBuilder |

**El conflicto**: Si el usuario asignÃ³ manualmente `MOVING_LEFT` pero la fixture estÃ¡ en `position.x > 0` (lado derecho del escenario), el backend dice "LEFT" pero visualmente estÃ¡ a la derecha. El stereo routing por posiciÃ³n (que es el correcto) contradice la zona asignada.

---

## 5. REFERENCIA: CÃ“MO LO HACE grandMA3 {#5-referencia-grandma3}

### 5.1 Arquitectura de SelecciÃ³n grandMA3

grandMA3 separa claramente 3 niveles:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    grandMA3 MODEL                        â”‚
â”‚                                                          â”‚
â”‚  NIVEL 1: FIXTURE (Identidad fÃ­sica)                    â”‚
â”‚  â”œâ”€â”€ Fixture 1: ADJ Vizi Beam 5RX, DMX 1.001          â”‚
â”‚  â”œâ”€â”€ Fixture 2: ADJ Vizi Beam 5RX, DMX 1.017          â”‚
â”‚  â””â”€â”€ Fixture 3: Chauvet COLORband T3, DMX 1.033       â”‚
â”‚                                                          â”‚
â”‚  NIVEL 2: GROUP (Colecciones reutilizables)             â”‚
â”‚  â”œâ”€â”€ Group 1: "All Movers"   â†’ [Fixture 1, 2]          â”‚
â”‚  â”œâ”€â”€ Group 2: "Front Wash"   â†’ [Fixture 3, 4, 5]       â”‚
â”‚  â”œâ”€â”€ Group 3: "Stage Left"   â†’ [Fixture 1, 3]          â”‚
â”‚  â””â”€â”€ Group 4: "Even Movers"  â†’ [Fixture 2, 4]          â”‚
â”‚                                                          â”‚
â”‚  NIVEL 3: SELECTION (Filtro dinÃ¡mico en runtime)        â”‚
â”‚  â”œâ”€â”€ "Group 1" â†’ todos                                  â”‚
â”‚  â”œâ”€â”€ "Group 1 ODD" â†’ fixtures 1, 3, 5... del grupo    â”‚
â”‚  â”œâ”€â”€ "Group 1 EVEN" â†’ fixtures 2, 4, 6... del grupo   â”‚
â”‚  â”œâ”€â”€ "Group 1 1 THRU 3" â†’ primeros 3 del grupo        â”‚
â”‚  â””â”€â”€ "Group 1 SHUFFLE" â†’ orden aleatorio               â”‚
â”‚                                                          â”‚
â”‚  KEY INSIGHT: Groups son ESTÃTICOS.                     â”‚
â”‚               Selections son DINÃMICOS (filtros).       â”‚
â”‚               El efecto recibe una SELECTION, no un     â”‚
â”‚               grupo.                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Conceptos clave de grandMA3

| Concepto | grandMA3 | LuxSync actual | LuxSync deberÃ­a |
|----------|----------|----------------|-----------------|
| **Fixture** | Entidad Ãºnica con ID | âœ… `fixture.id` | âœ… OK |
| **Group** | ColecciÃ³n estÃ¡tica de IDs | âš ï¸ Existe en schema, vacÃ­o en runtime | âœ… Implementar |
| **Selection** | Filtro dinÃ¡mico sobre grupo | âŒ No existe | âœ… Implementar |
| **Parity** | Even/Odd/1Thru3/etc | âŒ No existe | âœ… Implementar |
| **World** | AgrupaciÃ³n de fixtures en espacio 3D | âŒ No existe | âŒ No necesario |
| **Phaser** | Motor de efectos con fan/spread | âŒ No existe | âš ï¸ InspiraciÃ³n |

### 5.3 Lo que grandMA3 NO usa

- **No usa "zonas" como categorÃ­as semÃ¡nticas.** No hay "front" ni "back" hardcodeado.
- **No auto-asigna nada.** El usuario crea todos los grupos manualmente.
- **No mezcla nomenclaturas.** Todo es numÃ©rico (Fixture 1, Group 1, Preset 1).

### 5.4 QuÃ© PODEMOS tomar de grandMA3 (sin convertirnos en grandMA3)

1. **Groups como colecciones estÃ¡ticas de IDs** â†’ Ya existe en schema, solo falta implementaciÃ³n
2. **Selection filters** â†’ Even/Odd/Index range como modificadores sobre grupos
3. **El efecto NO decide sobre quÃ© actÃºa** â†’ El TARGET se define ANTES, el efecto solo genera valores

---

## 6. PROPUESTA DE UNIFICACIÃ“N {#6-propuesta}

### 6.1 Principio rector

> **Una Zona es una propiedad FÃSICA del fixture. Un Grupo es una colecciÃ³n LÃ“GICA. Un Selector es un FILTRO dinÃ¡mico.**

```
FIXTURE tiene ZONA (dÃ³nde estÃ¡ fÃ­sicamente)
      â”‚
      â–¼
GRUPO contiene FIXTURES (colecciÃ³n reutilizable)
      â”‚
      â–¼
SELECTOR filtra GRUPO (even/odd/L/R/index range)
      â”‚
      â–¼
EFECTO recibe FIXTURE IDS (lista final, sin ambigÃ¼edad)
```

### 6.2 Zona CanÃ³nica â€” Un solo formato

**DECISIÃ“N: `kebab-case`, todo minÃºsculas, mÃ¡ximo 2 niveles.**

```typescript
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CANONICAL ZONE â€” LA ÃšNICA VERDAD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

type CanonicalZone =
  // PARS / WASH / BARS (luces fijas de color)
  | 'front'           // PARs/wash frontales
  | 'back'            // PARs/wash traseros
  | 'floor'           // Uplights de suelo

  // MOVERS (cabezas mÃ³viles)
  | 'movers-left'     // Movers lado izquierdo
  | 'movers-right'    // Movers lado derecho

  // SPECIALS
  | 'center'          // Strobes, blinders (centro visual)
  | 'air'             // Lasers, hazers, atmÃ³sfera
  | 'ambient'         // House lights, decorativo

  // CATCH-ALL
  | 'unassigned'      // Sin zona (default)
```

**9 zonas. Sin legacy. Sin grito. Sin ambigÃ¼edad.**

### 6.3 Grupos DinÃ¡micos â€” Auto-generados + Manuales

```typescript
// GRUPOS AUTO-GENERADOS (del show cargado):
'all'           â†’ Todas las fixtures
'all-movers'    â†’ Todas las cabezas mÃ³viles (zone starts with 'movers-')
'all-pars'      â†’ Todos los PARs (zone is 'front' | 'back' | 'floor')
'all-left'      â†’ Todo lo que tiene position.x < 0
'all-right'     â†’ Todo lo que tiene position.x >= 0

// GRUPOS MANUALES (creados por el usuario en StageConstructor):
'my-group-1'    â†’ [fixture-001, fixture-003, fixture-005]
```

### 6.4 Selectores â€” Filtros sobre Grupos

```typescript
interface FixtureSelector {
  /** Target: zone name, group ID, or 'all' */
  target: CanonicalZone | string
  
  /** Parity filter (applied AFTER target resolution) */
  parity?: 'all' | 'even' | 'odd'
  
  /** Index range filter: "1-3" or "1,3,5" (1-based, within resolved group) */
  indexRange?: string
  
  /** Phase offset per fixture (for wave/chase effects) */
  phaseSpread?: number  // 0-1, distributed across fixtures
}
```

**Flujo de resoluciÃ³n:**

```
1. target: 'front'
   â””â”€â”€â–¶ Resolver: todas las fixtures con zone === 'front'
        â””â”€â”€â–¶ [fix-1, fix-2, fix-3, fix-4, fix-5, fix-6]

2. parity: 'even'
   â””â”€â”€â–¶ Filtrar: Ã­ndice par dentro del grupo
        â””â”€â”€â–¶ [fix-2, fix-4, fix-6]

3. indexRange: '1-2'  (opcional)
   â””â”€â”€â–¶ Filtrar: solo primeros 2 del resultado
        â””â”€â”€â–¶ [fix-2, fix-4]

4. Resultado final â†’ IDs concretos para el efecto
```

### 6.5 Mapeo de MigraciÃ³n

```
LEGACY â†’ CANONICAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FRONT_PARS      â†’ 'front'
BACK_PARS       â†’ 'back'
FLOOR_PARS      â†’ 'floor'
MOVING_LEFT     â†’ 'movers-left'
MOVING_RIGHT    â†’ 'movers-right'
STROBES         â†’ 'center'
LASERS          â†’ 'air'
AIR             â†’ 'air'
AMBIENT         â†’ 'ambient'
CENTER          â†’ 'center'
UNASSIGNED      â†’ 'unassigned'

stage-left      â†’ 'movers-left'  (o position-based)
stage-right     â†’ 'movers-right' (o position-based)
ceiling-left    â†’ 'movers-left'
ceiling-right   â†’ 'movers-right'
floor-front     â†’ 'front'
floor-back      â†’ 'back'
```

### 6.6 Nueva EffectZone (reemplaza la actual)

```typescript
// effects/types.ts â€” REEMPLAZO
type EffectZone = CanonicalZone | 'all' | 'all-movers' | 'all-pars' | 'all-left' | 'all-right'
```

### 6.7 Nuevo ZoneSelector (Hephaestus UI)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ TARGET                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ALL â”‚ â”‚ FRONT â”‚ â”‚ BACK â”‚ â”‚ AIR â”‚ â”‚ MOVERS   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      â”‚
â”‚  ğŸ”€ FILTER                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ALL â”‚ â”‚ EVEN â”‚ â”‚ ODD â”‚ â”‚  L  â”‚ â”‚  R  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                      â”‚
â”‚  ğŸ“Š RESULT: 3/6 fixtures                            â”‚
â”‚  [fix-2] [fix-4] [fix-6]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**KEY INSIGHT**: L/R en el FILTER es por `position.x`, no por zona. AsÃ­ puedes hacer:
- `target: 'front'` + `filter: 'L'` = PARs frontales del lado izquierdo
- `target: 'movers'` + `filter: 'even'` = Movers pares
- `target: 'all'` + `filter: 'odd'` = TODOS los impares del show

---

## 7. PLAN DE IMPLEMENTACIÃ“N {#7-plan}

### 7.1 Fases

#### FASE 1: Canonical Zone Type (NO ROMPE NADA)
- [ ] Crear `CanonicalZone` type en `ShowFileV2.ts`
- [ ] Crear funciÃ³n `normalizeZone(legacy: string): CanonicalZone`
- [ ] Aplicar normalizaciÃ³n en `StagePersistence` al cargar .luxshow
- [ ] Aplicar normalizaciÃ³n en `IPCHandlers` al parchear fixtures
- **Riesgo**: Bajo. Es una capa de traducciÃ³n, no cambia lÃ³gica.

#### FASE 2: fixtureMatchesZone() simplificado
- [ ] Reescribir con canonical zones (10 lÃ­neas vs 60+)
- [ ] Eliminar todos los legacy cases
- [ ] Tests unitarios exhaustivos
- **Riesgo**: Medio. Cambio en lÃ³gica de routing.

#### FASE 3: FixtureSelector con Parity
- [ ] Definir `FixtureSelector` interface
- [ ] Agregar `selector: FixtureSelector` al `HephAutomationClip`
- [ ] Implementar resoluciÃ³n en `HephaestusRuntime.tick()`
- [ ] Implementar filtro even/odd/L/R en Merger
- **Riesgo**: Medio-alto. Cambia cÃ³mo los clips targetean fixtures.

#### FASE 4: UI â€” ZoneSelector v2 
- [ ] RediseÃ±ar ZoneSelector con TARGET + FILTER
- [ ] Preview de fixtures afectados en el Radar
- [ ] Integrar con StageConstructor groups
- **Riesgo**: Bajo. Solo UI.

#### FASE 5: MigraciÃ³n .luxshow
- [ ] Converter de zonas legacy en `StagePersistence`
- [ ] Auto-migraciÃ³n al abrir .luxshow con zonas legacy
- [ ] Bump schema version
- **Riesgo**: Medio. Backwards compatibility.

### 7.2 Orden Recomendado

```
FASE 1 â†’ FASE 5 â†’ FASE 2 â†’ FASE 3 â†’ FASE 4
  â”‚         â”‚         â”‚         â”‚         â”‚
  â”‚         â”‚         â”‚         â”‚         â””â”€ UI bonita al final
  â”‚         â”‚         â”‚         â””â”€ Even/Odd funciona
  â”‚         â”‚         â””â”€ Routing limpio
  â”‚         â””â”€ .luxshow migrado
  â””â”€ Tipos canÃ³nicos establecidos
```

### 7.3 EstimaciÃ³n

| Fase | Complejidad | Archivos afectados | EstimaciÃ³n |
|------|-------------|-------------------|------------|
| F1   | Baja        | 3-4               | 1 sesiÃ³n |
| F5   | Media       | 2-3               | 1 sesiÃ³n |
| F2   | Media       | 1-2               | 1 sesiÃ³n |
| F3   | Alta        | 4-6               | 2-3 sesiones |
| F4   | Media       | 2-3               | 1-2 sesiones |
| **TOTAL** | | **12-18 archivos** | **6-8 sesiones** |

---

---

## 8. EL MUNDO DE LAS VIBES: AUDITORÃA DE IMPACTO ZONAL {#8-vibes}

### 8.1 Contexto: LuxSync â‰  grandMA3

AquÃ­ es donde LuxSync se separa radicalmente de grandMA3 y de cualquier mesa DMX convencional:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  grandMA3:     HUMANO â”€â”€â–¶ Selecciona grupo â”€â”€â–¶ Programa efecto â”€â”€â–¶ GO     â”‚
â”‚                                                                             â”‚
â”‚  LuxSync:      MÃšSICA â”€â”€â–¶ GodEarFFT (7 bandas) â”€â”€â–¶ StereoPhysics          â”‚
â”‚                    â”‚           â”‚                      â”€â”€â–¶ Zonas REACTIVAS  â”‚
â”‚                    â”‚           â–¼                                            â”‚
â”‚                    â”‚     VibeProfile (restricciones)                        â”‚
â”‚                    â”‚           â”‚                                            â”‚
â”‚                    â”‚           â–¼                                            â”‚
â”‚                    â””â”€â”€â–¶ DecisionMaker (IA) â”€â”€â–¶ Efectos Core â”€â”€â–¶ Zonas     â”‚
â”‚                                                                             â”‚
â”‚  DIFERENCIA: Las zonas NO son elegidas por un humano.                      â”‚
â”‚  Son RESULTADOS de un anÃ¡lisis espectral en tiempo real.                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 Las 7 Bandas del GodEarFFT â†’ Mapa de Zonas de IluminaciÃ³n

El GodEarFFT divide el espectro en **7 bandas tÃ¡cticas con ZERO overlap** (Linkwitz-Riley 4th order):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BANDA GOD EAR    â”‚ RANGO Hz      â”‚ USO ILUMINACIÃ“N DECLARADO EN GodEarFFT.ts       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  1. subBass       â”‚  20 -    60   â”‚ FRONT PARS - Pump effect, Floor shakers          â”‚
â”‚  2. bass          â”‚  60 -   250   â”‚ MOVER LEFT - Bass pulsation, Stage wash low      â”‚
â”‚  3. lowMid        â”‚ 250 -   500   â”‚ STAGE WARM - Atmospheric fills                   â”‚
â”‚  4. mid           â”‚ 500 -  2000   â”‚ BACK PARS - Snare hits, Vocal presence           â”‚
â”‚  5. highMid       â”‚ 2000 - 6000   â”‚ MOVER RIGHT - Guitar crunch, Cymbal attack       â”‚
â”‚  6. treble        â”‚ 6000 - 16000  â”‚ STROBES - Hi-hat sync, Cymbal crashes            â”‚
â”‚  7. ultraAir      â”‚ 16000 - 22000 â”‚ LASERS / MICRO-SCANNERS - Ultra-fast response    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**OBSERVACIÃ“N CRÃTICA**: Este mapa en `GodEarFFT.ts` es DOCUMENTAL (en los `lightingUse` strings).  
Las StereoPhysics de cada vibe **REINTERPRETAN** estas bandas con su propia lÃ³gica.  
Es decir: el GodEarFFT propone, pero cada vibe dispone.

### 8.3 Las 4 StereoPhysics: CÃ³mo Cada Vibe Mapea Bandas â†’ Zonas

#### ğŸ›ï¸ TECHNO (TechnoStereoPhysics.ts)

```
BANDA             â”‚ ZONA FÃSICA              â”‚ LÃ“GICA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
bass              â”‚ frontParIntensity        â”‚ Gate 0.48, Vitamin x1.8, Power curve xÂ²
sqrt(mid Ã— treble)â”‚ backParIntensity         â”‚ Geometric mean (snare sniper), Gate 0.30
mid - 30%treble   â”‚ moverIntensityL          â”‚ "The Body", Gate 0.20, Boost x4
treble - 20%mid   â”‚ moverIntensityR          â”‚ "SCHWARZENEGGER", Gate 0.14, Boost x8
treble > 0.80     â”‚ strobeActive             â”‚ Noise mode baja threshold 20%
```

**OUTPUT usa**: `frontParIntensity`, `backParIntensity`, `moverIntensityL`, `moverIntensityR`  
**NO TIENE**: `air`, `ambient`, `center`, `floor`, `frontL/R`, `backL/R`

#### ğŸ‰ LATINO (LatinoStereoPhysics.ts)

```
BANDA             â”‚ ZONA FÃSICA              â”‚ LÃ“GICA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
bass              â”‚ frontParIntensity        â”‚ FAT HOLD (Peak Hold), Gate 0.55, "El Gordo"
treble            â”‚ backParIntensity         â”‚ Surgical Snare, Gate 0.24
mid (puro)        â”‚ moverIntensityL          â”‚ "El GalÃ¡n" (Voz/Conga), Gate 0.22
treble (puro)     â”‚ moverIntensityR          â”‚ "La Dama" (Trompetas/GÃ¼ira), Gate 0.20
```

**OUTPUT usa**: `frontParIntensity`, `backParIntensity`, `moverIntensityL`, `moverIntensityR`  
**IDENTICA ESTRUCTURA que Techno.** Solo cambian los parÃ¡metros de gate/boost/decay.

#### ğŸ¸ ROCK (RockStereoPhysics2.ts)

```
BANDA              â”‚ ZONA FÃSICA              â”‚ LÃ“GICA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
subBass (20-80Hz)  â”‚ frontParIntensity        â”‚ KICK DRUM puro, Gate 0.28
mid (500-2000Hz)   â”‚ backParIntensity         â”‚ VOCES + MELODÃA, Gate 0.05 (Freddie!)
lowMid + highMid   â”‚ moverIntensityL          â”‚ GUITARRAS + BAJO, Gate 0.10
highMid + treble   â”‚ moverIntensityR          â”‚ CYMBALS + BRILLO, Gate 0.12
```

**OUTPUT usa**: `frontParIntensity`, `backParIntensity`, `moverIntensityL`, `moverIntensityR`  
**TAMBIÃ‰N incluye**: `moverPositionL`, `moverPositionR` (movimiento reactivo)  
**PLUS**: Detector de subgÃ©nero (HARD_ROCK vs PROG_ROCK) con memoria de 30s

#### ğŸŒŠ CHILL (ChillStereoPhysics.ts)

```
BANDA              â”‚ ZONA FÃSICA              â”‚ LÃ“GICA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
godEar (global)    â”‚ frontL, frontR           â”‚ Osciladores con primos, fluido
godEar (global)    â”‚ backL, backR             â”‚ Onda oceÃ¡nica con presiÃ³n hidrostÃ¡tica
godEar + clarity   â”‚ moverL, moverR           â”‚ Incluye pan/tilt (movimiento completo)
godEar (global)    â”‚ airIntensity             â”‚ PresiÃ³n ambiental por profundidad
godEar (completo)  â”‚ oceanicTriggers (8 tipos)â”‚ Criaturas oceÃ¡nicas basadas en tiempo en zona
```

**OUTPUT usa**: `frontL`, `frontR`, `backL`, `backR`, `moverL{intensity,pan,tilt}`, `moverR{intensity,pan,tilt}`, `airIntensity`  
**ES LA ÃšNICA** que usa stereo en PARs (`frontL/R`, `backL/R`)  
**ES LA ÃšNICA** que usa `airIntensity`  
**ES LA ÃšNICA** que genera posiciÃ³n de movers, no solo intensidad

#### ğŸŸ¢ LASER (LaserPhysics.ts) â€” Transversal

```
BANDA              â”‚ ZONA FÃSICA              â”‚ LÃ“GICA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ultraAir (16-22kHz)â”‚ intensity                â”‚ Los lÃ¡sers responden al ULTRA-AIRE
clarity            â”‚ beamWidth                â”‚ > 0.9 = fino, < 0.5 = ensanchado
lowMid             â”‚ waveOffset               â”‚ OndulaciÃ³n horizontal (Trance)
```

**ZONA**: `air` implÃ­cito (no usa `EffectZone`, es un canal propio)

#### ğŸ¨ WASHER (WasherPhysics.ts) â€” Transversal

```
BANDA              â”‚ ZONA FÃSICA              â”‚ LÃ“GICA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
subBass (20-60Hz)  â”‚ intensity                â”‚ PresiÃ³n de aire = atmosfera
texture            â”‚ mode                     â”‚ breathing_wall / reactive_strobe
```

**ZONA**: `ambient`/`floor` implÃ­cito (no usa `EffectZone`)

### 8.4 Tabla Comparativa: Output Interfaces de las 4 StereoPhysics

| Campo Output          | Techno | Latino | Rock   | Chill  |
|-----------------------|--------|--------|--------|--------|
| `frontParIntensity`   | âœ…     | âœ…     | âœ…     | âŒ     |
| `backParIntensity`    | âœ…     | âœ…     | âœ…     | âŒ     |
| `moverIntensityL`     | âœ…     | âœ…     | âœ…     | âŒ     |
| `moverIntensityR`     | âœ…     | âœ…     | âœ…     | âŒ     |
| `moverIntensity` (legacy) | âœ… | âœ…     | âœ…     | âŒ     |
| `frontL` / `frontR`   | âŒ     | âŒ     | âŒ     | âœ…     |
| `backL` / `backR`     | âŒ     | âŒ     | âŒ     | âœ…     |
| `moverL.pan/tilt`     | âŒ     | âŒ     | âŒ     | âœ…     |
| `moverR.pan/tilt`     | âŒ     | âŒ     | âŒ     | âœ…     |
| `airIntensity`        | âŒ     | âŒ     | âŒ     | âœ…     |
| `strobeActive`        | âœ…     | âŒ     | âŒ     | âŒ     |
| `moverPositionL/R`    | âŒ     | âŒ     | âœ…     | âŒ     |
| `oceanicTriggers`     | âŒ     | âŒ     | âŒ     | âœ…     |
| `acidMode/noiseMode`  | âœ…     | âŒ     | âŒ     | âŒ     |
| `detectedSubgenre`    | âŒ     | âŒ     | âœ…     | âŒ     |

### 8.5 Los 45+ Efectos Core y Sus Zonas Hardcodeadas

Los efectos core usan `EffectZone` strings directamente:

| Efecto (Techno)     | Zonas Hardcodeadas                           | MixBus  |
|---------------------|----------------------------------------------|---------|
| IndustrialStrobe    | `['front', 'back', 'movers', 'pars']`       | global  |
| AcidSweep           | via zoneOverrides                             | htp     |
| CyberDualism        | via zoneOverrides                             | global  |
| GatlingRaid         | `['front', 'back']`                          | global  |
| SkySaw              | `['movers']` â†’ `movers_left`, `movers_right` | htp     |
| AbyssalRise         | via zoneOverrides                             | global  |
| VoidMist            | `['front', 'pars', 'back', 'movers']`        | global  |
| StaticPulse         | `['front', 'pars', 'back']`                 | global  |
| DigitalRain         | `['movers']`                                 | global  |
| DeepBreath           | via zoneOverrides                             | global  |
| SeismicSnap         | `['front', 'pars', 'back', 'movers']`        | global  |
| FiberOptics         | `['back', 'pars', 'front', 'movers']`        | global  |
| CoreMeltdown        | global override                               | global  |
| BinaryGlitch        | global override                               | global  |
| SonarPing           | `['back', 'pars', 'front']` (secuencia)      | global  |
| AmbientStrobe       | via zoneOverrides                             | htp     |

| Efecto (Latino)     | Zonas Hardcodeadas                           |
|---------------------|----------------------------------------------|
| TidalWave           | `['front', 'pars', 'back', 'movers']` (ola)  |
| SalsaFire           | via `zoneOverrides` per-zone                  |
| ClaveRhythm         | `['movers']` (clave pattern)                  |
| TropicalPulse       | via `zoneOverrides` per-zone                  |
| MacheteSpark        | `movers_left` â†” `movers_right` (alternancia)  |
| CorazonLatino       | via `zoneOverrides` per-zone                  |
| CumbiaMoon          | via `zoneOverrides` per-zone                  |
| GhostBreath         | via `zoneOverrides` per-zone                  |
| SolarFlare          | `['all']`                                     |

| Efecto (Chill)      | Zonas Hardcodeadas                           |
|---------------------|----------------------------------------------|
| WhaleSong           | `['frontL','frontR','backL','backR','movers_left','movers_right']` |
| SolarCaustics       | via triggers, profundidad oceÃ¡nica            |
| SchoolOfFish        | via triggers, profundidad oceÃ¡nica            |
| AbyssalJellyfish    | via triggers, profundidad oceÃ¡nica            |
| SurfaceShimmer      | via triggers, profundidad oceÃ¡nica            |
| PlanktonDrift       | via triggers, profundidad oceÃ¡nica            |
| DeepCurrentPulse    | via triggers, profundidad oceÃ¡nica            |
| BioluminescentSpore | via triggers, profundidad oceÃ¡nica            |

### 8.6 VEREDICTO: Â¿Hay Que Retocar las StereoPhysics?

#### ğŸŸ¢ BUENAS NOTICIAS â€” LO QUE NO HAY QUE TOCAR:

**Las 4 StereoPhysics usan su PROPIO vocabulario interno.** No dependen del tipo `EffectZone` ni de `FixtureZone`. Sus outputs son campos tipados (`frontParIntensity`, `moverIntensityL`, etc.), NO strings de zona.

```typescript
// TechnoPhysicsResult â€” NO USA STRINGS DE ZONA
{
  frontParIntensity: 0.85,    // â† Esto NO es "front" string
  backParIntensity: 0.42,     // â† Esto NO es "back" string
  moverIntensityL: 0.70,      // â† Esto NO es "movers_left" string
  moverIntensityR: 0.33,      // â† Esto NO es "movers_right" string
}
```

**La calibraciÃ³n de gates, boosts, decays, peak hold y todo ese arte acÃºstico estÃ¡ INTACTO.** Los parÃ¡metros son escalares (0-1), no dependen de naming de zonas.

#### ğŸŸ¡ EL PUNTO DE CONTACTO â€” DÃ“NDE SE TRADUCE:

El punto crÃ­tico es **TitanOrchestrator.ts â€” el Merger**. AhÃ­ es donde se toman los outputs de las StereoPhysics y se aplican a fixtures reales via `fixtureMatchesZone()`:

```
StereoPhysics.frontParIntensity
       â”‚
       â–¼
TitanOrchestrator Merger
       â”‚
       â”œâ”€â”€ fixture.zone === 'FRONT_PARS' ? â”€â”€â–¶ aplica frontParIntensity
       â”œâ”€â”€ fixture.zone === 'BACK_PARS'  ? â”€â”€â–¶ aplica backParIntensity
       â””â”€â”€ fixture.zone === 'MOVING_LEFT' ? â”€â”€â–¶ aplica moverIntensityL
       
       ESTO es fixtureMatchesZone() â†’ EL MISMO SWITCH DE 60 LÃNEAS
```

**ES DECIR**: Las StereoPhysics generan valores perfectamente calibrados, pero la TRADUCCIÃ“N a fixtures reales pasa por el mismo `fixtureMatchesZone()` roto.

#### ğŸ”´ LOS EFECTOS CORE SÃ NECESITAN MIGRACIÃ“N

Los 45+ efectos usan strings de `EffectZone` directamente:
```typescript
zones: ['front', 'pars', 'back', 'movers']  // â† ESTOS SÃ son strings
zoneOverrides['movers_left'] = { ... }       // â† ESTOS SÃ son strings
```

Estos strings pasan por `fixtureMatchesZone()` â†’ **SÃ estÃ¡n afectados por la unificaciÃ³n zonal.**

### 8.7 Mapa de Impacto Zonal por Componente

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPONENTE              â”‚ USA EffectZone â”‚ NECESITA   â”‚ RIESGO â”‚
â”‚                          â”‚ STRINGS?       â”‚ MIGRACIÃ“N  â”‚        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  TechnoStereoPhysics     â”‚ âŒ No          â”‚ âŒ No      â”‚ CERO   â”‚
â”‚  LatinoStereoPhysics     â”‚ âŒ No          â”‚ âŒ No      â”‚ CERO   â”‚
â”‚  RockStereoPhysics2      â”‚ âŒ No          â”‚ âŒ No      â”‚ CERO   â”‚
â”‚  ChillStereoPhysics      â”‚ âŒ No          â”‚ âŒ No      â”‚ CERO   â”‚
â”‚  LaserPhysics            â”‚ âŒ No          â”‚ âŒ No      â”‚ CERO   â”‚
â”‚  WasherPhysics           â”‚ âŒ No          â”‚ âŒ No      â”‚ CERO   â”‚
â”‚  PhysicsEngine           â”‚ âŒ No          â”‚ âŒ No      â”‚ CERO   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  VibeProfile type        â”‚ âŒ No          â”‚ âŒ No      â”‚ CERO   â”‚
â”‚  VibeManager             â”‚ âŒ No          â”‚ âŒ No      â”‚ CERO   â”‚
â”‚  VibeSectionProfiles     â”‚ âŒ No          â”‚ âŒ No      â”‚ CERO   â”‚
â”‚  Vibe Profiles (5)       â”‚ âŒ No          â”‚ âŒ No      â”‚ CERO   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Efectos Techno (16)     â”‚ âœ… SÃ­          â”‚ âœ… SÃ­      â”‚ BAJO   â”‚
â”‚  Efectos Latino (10)     â”‚ âœ… SÃ­          â”‚ âœ… SÃ­      â”‚ BAJO   â”‚
â”‚  Efectos Rock (6)        â”‚ âœ… SÃ­          â”‚ âœ… SÃ­      â”‚ BAJO   â”‚
â”‚  Efectos Chill (8)       â”‚ âœ… SÃ­          â”‚ âœ… SÃ­      â”‚ BAJO   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  TitanOrchestrator       â”‚ âœ… SÃ­          â”‚ âœ… SÃ­      â”‚ ALTO   â”‚
â”‚  fixtureMatchesZone()    â”‚ âœ… SÃ­          â”‚ âœ… SÃ­      â”‚ ALTO   â”‚
â”‚  Merger (physicsâ†’fixtures)â”‚ âœ… SÃ­         â”‚ âœ… SÃ­      â”‚ ALTO   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  GodEarFFT (lightingUse) â”‚ ğŸ“ Documental â”‚ âŒ No      â”‚ CERO   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.8 La Cadena Completa: GodEar â†’ Vibe â†’ Physics â†’ Zone â†’ Fixture

```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ AUDIO IN   â”‚     â”‚  GodEarFFT   â”‚     â”‚ 7 BANDAS          â”‚
   â”‚ (MicrÃ³fono)â”‚â”€â”€â”€â”€â–¶â”‚ Blackman-    â”‚â”€â”€â”€â”€â–¶â”‚ subBassâ†’ultraAir  â”‚
   â”‚            â”‚     â”‚ Harris 4096  â”‚     â”‚ (escalares 0-1)   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚ VibeManager  â”‚     â”‚ StereoPhysics     â”‚
                      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€     â”‚     â”‚ (por vibe activo) â”‚
                      â”‚ Restriccionesâ”‚â”€â”€â”€â”€â–¶â”‚                   â”‚
                      â”‚ de mood/colorâ”‚     â”‚ Techno/Latino/    â”‚
                      â”‚ /dimmer/etc  â”‚     â”‚ Rock/Chill        â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â”‚ OUTPUT:
                                                     â”‚ frontParIntensity
                                                     â”‚ backParIntensity
                                                     â”‚ moverIntensityL/R
                                                     â”‚ (escalares 0-1)
                                                     â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Efectos    â”‚                          â”‚ TitanOrchestrator â”‚
   â”‚ Core (45+) â”‚ â”€â”€zones: EffectZone[]â”€â”€â–¶ â”‚ MERGER            â”‚
   â”‚ â”€â”€â”€â”€â”€â”€     â”‚  zoneOverrides: {}       â”‚                   â”‚
   â”‚ EffectZone â”‚                          â”‚ fixtureMatchesZoneâ”‚
   â”‚ strings    â”‚                          â”‚ (EL SWITCH DE 60) â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚ FIXTURES REALES   â”‚
                                           â”‚ FixtureZone       â”‚
                                           â”‚ (FRONT_PARS, etc) â”‚
                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   âš ï¸ EL CUELLO DE BOTELLA ESTÃ EN TITANORCHESTRATOR,
      NO EN LAS STEREOPHYSICS NI EN EL GODEAR.
```

---

## 9. PLAN DE IMPLEMENTACIÃ“N ACTUALIZADO (CON VIBES) {#9-plan-updated}

### 9.1 Fases Revisadas

#### FASE 1: Canonical Zone Type (NO ROMPE NADA) â¬…ï¸ SIN CAMBIOS
- [ ] Crear `CanonicalZone` type en `ShowFileV2.ts`
- [ ] Crear funciÃ³n `normalizeZone(legacy: string): CanonicalZone`
- [ ] Aplicar normalizaciÃ³n en `StagePersistence` al cargar .luxshow
- [ ] Aplicar normalizaciÃ³n en `IPCHandlers` al parchear fixtures
- **Impacto en vibes**: NINGUNO
- **Riesgo**: Bajo

#### FASE 2: fixtureMatchesZone() simplificado â¬…ï¸ CLAVE PARA VIBES
- [ ] Reescribir con canonical zones (10 lÃ­neas vs 60+)
- [ ] Eliminar todos los legacy cases
- [ ] Verificar que Merger traduce correctamente `frontParIntensity â†’ 'front'`
- [ ] Tests unitarios exhaustivos
- **Impacto en vibes**: INDIRECTO â€” las StereoPhysics no cambian, pero la traducciÃ³n a fixtures SÃ
- **Riesgo**: Medio. **ESTE ES EL PUNTO CRÃTICO.**

#### FASE 3: FixtureSelector con Parity â¬…ï¸ SIN CAMBIOS
- [ ] Definir `FixtureSelector` interface
- [ ] Agregar `selector: FixtureSelector` al `HephAutomationClip`
- [ ] Implementar resoluciÃ³n en `HephaestusRuntime.tick()`
- [ ] Implementar filtro even/odd/L/R en Merger
- **Impacto en vibes**: NINGUNO (parity es para Hephaestus manual, no para reactivo)
- **Riesgo**: Medio-alto

#### FASE 4: MigraciÃ³n de Efectos Core (NUEVA) â¬…ï¸ ESPECÃFICA PARA VIBES
- [ ] Buscar y reemplazar `EffectZone` strings en los ~40 efectos
- [ ] Mapeo: `'front'` â†’ `'front'`, `'back'` â†’ `'back'`, `'movers'` â†’ `'movers-left' + 'movers-right'`, `'pars'` â†’ `'front' + 'back' + 'floor'`
- [ ] Verificar que cada efecto mantiene su targeting correcto
- [ ] **NO TOCAR los parÃ¡metros de ningÃºn efecto** â€” solo los strings de zona
- **Impacto en vibes**: DIRECTO â€” Los efectos son los que suenan "mal" con zonas rotas
- **Riesgo**: BAJO si se hace mecÃ¡nicamente (buscar/reemplazar + review)

#### FASE 5: UI â€” ZoneSelector v2 â¬…ï¸ SIN CAMBIOS
- [ ] RediseÃ±ar ZoneSelector con TARGET + FILTER
- [ ] Preview de fixtures afectados en el Radar
- **Riesgo**: Bajo

#### FASE 6: MigraciÃ³n .luxshow â¬…ï¸ SIN CAMBIOS
- [ ] Converter de zonas legacy en `StagePersistence`
- [ ] Auto-migraciÃ³n al abrir .luxshow
- **Riesgo**: Medio

### 9.2 Orden Recomendado (Actualizado)

```
FASE 1 â†’ FASE 6 â†’ FASE 2 â†’ FASE 4 â†’ FASE 3 â†’ FASE 5
  â”‚         â”‚         â”‚         â”‚         â”‚         â”‚
  â”‚         â”‚         â”‚         â”‚         â”‚         â””â”€ UI bonita al final
  â”‚         â”‚         â”‚         â”‚         â””â”€ Even/Odd para Hephaestus
  â”‚         â”‚         â”‚         â””â”€ Efectos core migrados (LAS VIBES VIVEN AQUÃ)
  â”‚         â”‚         â””â”€ Routing limpio (EL CUELLO DE BOTELLA)
  â”‚         â””â”€ .luxshow migrado
  â””â”€ Tipos canÃ³nicos establecidos
```

### 9.3 EstimaciÃ³n Actualizada

| Fase | Complejidad | Archivos afectados | EstimaciÃ³n | Impacto Vibes |
|------|-------------|-------------------|------------|---------------|
| F1   | Baja        | 3-4               | 1 sesiÃ³n   | Ninguno       |
| F6   | Media       | 2-3               | 1 sesiÃ³n   | Ninguno       |
| F2   | Media       | 1-2               | 1 sesiÃ³n   | INDIRECTO     |
| F4   | Media       | ~40 efectos       | 2-3 sesiones | **DIRECTO** |
| F3   | Alta        | 4-6               | 2-3 sesiones | Ninguno      |
| F5   | Media       | 2-3               | 1-2 sesiones | Ninguno      |
| **TOTAL** | | **~55 archivos** | **8-11 sesiones** | |

### 9.4 Lo Que NO Hay Que Tocar (Lista Sagrada)

```
ğŸš« NO TOCAR â€” CalibraciÃ³n de fÃ­sicas reactivas:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

hal/physics/TechnoStereoPhysics.ts
  â”œâ”€ FRONT_PAR_GATE_ON = 0.48
  â”œâ”€ BASS_VITAMIN_BOOST = 1.8
  â”œâ”€ BACK_PAR_GATE = 0.30
  â”œâ”€ BACK_PAR_SLAP_MULT = 5.0
  â”œâ”€ MOVER_L_GATE = 0.20 / MOVER_L_BOOST = 4.0
  â”œâ”€ MOVER_R_GATE = 0.14 / MOVER_R_BOOST = 8.0
  â””â”€ PARANOIA GATE (Recovery AGC)

hal/physics/LatinoStereoPhysics.ts
  â”œâ”€ FRONT_PAR_GATE = 0.55 (FAT HOLD)
  â”œâ”€ BASS_HOLD_DECAY = 0.85 ("El Gordo")
  â”œâ”€ BACK_PAR_GATE = 0.24 (Surgical Snare)
  â”œâ”€ MOVER_L_GATE = 0.22 ("El GalÃ¡n")
  â”œâ”€ MOVER_R_GATE = 0.20 ("La Dama")
  â””â”€ Todos los DECAY y ATTACK values

hal/physics/RockStereoPhysics2.ts
  â”œâ”€ gains: { frontPar: 2.6, backPar: 2.0, moverLeft: 1.8, moverRight: 1.8 }
  â”œâ”€ gates: { frontPar: 0.28, backPar: 0.05, moverLeft: 0.10, moverRight: 0.12 }
  â”œâ”€ decay: { frontPar: 0.20, backPar: 0.75, moverLeft: 0.65, moverRight: 0.50 }
  â””â”€ Subgenre detector (HARD_ROCK / PROG_ROCK)

hal/physics/ChillStereoPhysics.ts
  â”œâ”€ HYDROSTATIC_CONFIG (todo el motor de mareas)
  â”œâ”€ TRIGGER_CONFIG (8 criaturas oceÃ¡nicas)
  â”œâ”€ NÃºmeros primos de osciladores (3659, 2069, 3023, 2707...)
  â””â”€ Elastic Time (BPM-scaled oceanic time)

hal/physics/LaserPhysics.ts
  â””â”€ RETINA GUARD + Safety Config

hal/physics/WasherPhysics.ts
  â””â”€ Breathing/Reactive thresholds

workers/GodEarFFT.ts
  â””â”€ Bandas tÃ¡cticas, Blackman-Harris, AGC, EVERYTHING
```

**NINGUNO de estos archivos necesita modificaciÃ³n para la unificaciÃ³n zonal.**

---

## CONCLUSIÃ“N

Radwulf, la auditorÃ­a de vibes confirma que **estamos de suerte**:

### ğŸŸ¢ Las StereoPhysics estÃ¡n A SALVO

Las 4 fÃ­sicas calibradas (Techno/Latino/Rock/Chill) + Laser + Washer **NO usan strings de zona**. Usan campos tipados (`frontParIntensity`, `moverIntensityL`). Sus gates, boosts, decays, peak holds y toda la magia acÃºstica calibrada durante dÃ­as **NO se toca**.

### ğŸŸ¡ Los Efectos Core SÃ necesitan migraciÃ³n de strings

Los ~40 efectos usan `EffectZone` strings (`'front'`, `'back'`, `'movers'`, `'pars'`). Pero es una migraciÃ³n **mecÃ¡nica** â€” cambiar strings, no recalibrar nada.

### ğŸ”´ El verdadero cuello de botella sigue siendo TitanOrchestrator

El Merger + `fixtureMatchesZone()` es donde TODO converge: las intensidades de las StereoPhysics Y los zoneOverrides de los efectos. Es el **Ãºnico punto de fallo** que afecta tanto a las vibes reactivas como a Hephaestus manual.

### La Diferencia LuxSync vs grandMA3

grandMA3 es un bisturÃ­: el cirujano elige cada corte. LuxSync es un sistema nervioso: las 7 bandas del GodEar son los nervios, las StereoPhysics son los reflejos, y las vibes son el temperamento. **Las zonas no son elegidas por un humano â€” son consecuencias de la fÃ­sica del sonido.** Por eso la calibraciÃ³n es sagrada y por eso NO podemos romperla.

**Lo mÃ¡s urgente sigue siendo FASE 1** (normalizaciÃ³n de zonas canÃ³nicas). DespuÃ©s FASE 2 (el switch de 60 lÃ­neas). Los efectos (FASE 4) se migran mecÃ¡nicamente sin riesgo.

---

*PunkOpus â€” "La zona no es donde la mÃ¡quina estÃ¡. Es donde la MÃšSICA la pone."* âš’ï¸
