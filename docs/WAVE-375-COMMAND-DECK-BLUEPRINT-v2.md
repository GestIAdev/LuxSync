# ğŸ›ï¸ WAVE 375: THE COMMAND DECK - FINAL BLUEPRINT v2
## Sistema de Control Unificado para Live Performance

```
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— 
â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
 â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•     â•šâ•â•â•šâ•â•     â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•â•â•â•â• 
                    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—              
                    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•              
                    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•               
                    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•—               
                    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—              
                    â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â•              
```

**Fecha:** 2026-01-12  
**Prerrequisito:** WAVE 374 - MasterArbiter Integration âœ…  
**Estado:** BLUEPRINT FINAL - Pendiente aprobaciÃ³n para ejecuciÃ³n

---

## ğŸ¯ DECISIONES ARQUITECTÃ“NICAS CERRADAS

| Pregunta | DecisiÃ³n | RazÃ³n |
|----------|----------|-------|
| Zen Mode toggle | TitleBar izquierda `[â›¶]` | Acceso rÃ¡pido sin perder viewport |
| Sidebar colapsado | **0px TOTAL** | MÃ¡ximo espacio en live show |
| Command Deck altura | **140px** | Botones grandes para dedos gordos |
| Quick Actions en Deck | Strobe, Blinder, Smoke + Blackout | Solo efectos **GLOBALES** |
| Beam/Prism/Laser/Rainbow | â†’ THE PROGRAMMER | Son **fixture-specific** |
| Master Dimmer | **GRAND MASTER** (todos los fixtures) | "Volumen" general de luz |
| XY Pad | **MANTENER** | EstÃ¡ndar oro para apuntar movers |
| Radar | Centro de gravedad + Fan grupal | DistribuciÃ³n de formaciones |
| Patterns (Circle, Eight) | **Arbiter genera frames** | Suavidad 60fps sin IPC lag |
| Scenes Tab | Placeholder "Coming Soon" | Reservado para Timecoder |

---

## ğŸ“ LAYOUT GLOBAL: ZEN MODE

### Estado Normal (Sidebar visible)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â›¶] LUXSYNC - Show Name                                    [â”€] [â–¡] [Ã—]     â”‚ 32px
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚        â”‚                                                               â”‚   â”‚
â”‚ â”‚  NAV   â”‚                      VIEWPORT                                 â”‚   â”‚
â”‚ â”‚ (64px) â”‚                    (Stage Canvas)                             â”‚   â”‚
â”‚ â”‚        â”‚                                                               â”‚   â”‚
â”‚ â”‚  ğŸµ    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚ â”‚ Audio  â”‚   â”‚                                                      â”‚    â”‚   â”‚
â”‚ â”‚        â”‚   â”‚                                                      â”‚    â”‚   â”‚
â”‚ â”‚  ğŸšï¸    â”‚   â”‚              2D / 3D Visualization                   â”‚    â”‚   â”‚
â”‚ â”‚ Setup  â”‚   â”‚                                                      â”‚    â”‚   â”‚
â”‚ â”‚        â”‚   â”‚                                                      â”‚    â”‚   â”‚
â”‚ â”‚  ğŸ’¾    â”‚   â”‚                                                      â”‚    â”‚   â”‚
â”‚ â”‚ Scenes â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚ â”‚        â”‚                                                               â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚                        ğŸ›ï¸ THE COMMAND DECK (140px)                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ZEN MODE Activado (F11 / Z)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â›¶] LUXSYNC - Show Name                                    [â”€] [â–¡] [Ã—]     â”‚ 32px
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                                        â”‚   â”‚
â”‚ â”‚                                                                        â”‚   â”‚
â”‚ â”‚                                                                        â”‚   â”‚
â”‚ â”‚                         VIEWPORT MAXIMIZADO                            â”‚   â”‚
â”‚ â”‚                                                                        â”‚   â”‚
â”‚ â”‚                     (Sidebar = 0px, TODO para el show)                 â”‚   â”‚
â”‚ â”‚                                                                        â”‚   â”‚
â”‚ â”‚                                                                        â”‚   â”‚
â”‚ â”‚                                                                        â”‚   â”‚
â”‚ â”‚                                                                        â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚                        ğŸ›ï¸ THE COMMAND DECK (140px)                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ImplementaciÃ³n:**
```typescript
// MainLayout.tsx
const [isZenMode, setIsZenMode] = useState(false)

// Keyboard shortcut
useEffect(() => {
  const handleKey = (e: KeyboardEvent) => {
    if (e.key === 'F11' || e.key === 'z' || e.key === 'Z') {
      if (e.target === document.body) {
        e.preventDefault()
        setIsZenMode(prev => !prev)
      }
    }
  }
  window.addEventListener('keydown', handleKey)
  return () => window.removeEventListener('keydown', handleKey)
}, [])

// Layout
<div className="main-layout">
  {!isZenMode && <Sidebar />}  {/* 0px cuando Zen */}
  <div className="viewport-area">...</div>
</div>
```

---

## ğŸ›ï¸ PARTE 1: THE COMMAND DECK (Bottom Bar - 140px)

### Layout Interno
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           THE COMMAND DECK                                   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   LAYER     â”‚  â”‚      QUICK ACTIONS          â”‚  â”‚ STATUS â”‚  â”‚ BLACKOUT â”‚ â”‚
â”‚  â”‚  INDICATOR  â”‚  â”‚                             â”‚  â”‚  BAR   â”‚  â”‚  MASTER  â”‚ â”‚
â”‚  â”‚             â”‚  â”‚  [âš¡]  [â˜€ï¸]  [ğŸ’¨]            â”‚  â”‚        â”‚  â”‚          â”‚ â”‚
â”‚  â”‚  ğŸ¤– AI      â”‚  â”‚ STROBE BLIND SMOKE          â”‚  â”‚BPM:128 â”‚  â”‚    â–      â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”‚   1     2     3             â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–‘ 72â”‚  â”‚ BLACKOUT â”‚ â”‚
â”‚  â”‚  ğŸšï¸ MANUAL  â”‚  â”‚                             â”‚  â”‚        â”‚  â”‚ [SPACE]  â”‚ â”‚
â”‚  â”‚             â”‚  â”‚       ğŸšï¸ GRAND MASTER       â”‚  â”‚        â”‚  â”‚          â”‚ â”‚
â”‚  â”‚ [KILL ALL]  â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚        â”‚  â”‚          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚     ~120px            ~400px (flexible)            ~200px       ~140px      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.1 LAYER INDICATOR (Izquierda)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CONTROL SOURCE â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ¤–  AI    â”‚ â† Iluminado cuando Layer0 manda
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚        â”‚        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸšï¸ MANUAL â”‚ â† Iluminado cuando hay overrides en Layer1
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ KILL ALL  â”‚ â† Libera TODOS los overrides manuales
â”‚  â”‚    [ESC]  â”‚   (el botÃ³n del pÃ¡nico suave)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**LÃ³gica:**
```typescript
// Consultar estado del arbiter cada 100ms o via eventos
const status = await window.electron.invoke('lux:arbiter:status')

// status.activeOverrides: Map<fixtureId, Set<channel>>
const hasManualOverrides = status.activeOverrides.size > 0

// Visual:
// - AI: Glow verde cuando NO hay overrides
// - MANUAL: Glow magenta cuando SÃ hay overrides
// - Ambos pueden estar activos (AI en algunos fixtures, Manual en otros)
```

### 1.2 QUICK ACTIONS (Centro)

**Solo efectos GLOBALES que afectan toda la sala:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      QUICK ACTIONS                          â”‚
â”‚                                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚    â”‚    âš¡    â”‚   â”‚    â˜€ï¸    â”‚   â”‚    ğŸ’¨    â”‚              â”‚
â”‚    â”‚  STROBE  â”‚   â”‚  BLINDER â”‚   â”‚   SMOKE  â”‚              â”‚
â”‚    â”‚    [1]   â”‚   â”‚    [2]   â”‚   â”‚    [3]   â”‚              â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                             â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GRAND MASTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚    0% â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 100%        â”‚
â”‚                           75%                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Especificaciones:**
- **TamaÃ±o botones:** 60x60px mÃ­nimo
- **Feedback visual:** Glow del color del efecto cuando activo
- **Comportamiento:** Toggle (click ON, click OFF)
- **Strobe/Blinder:** Auto-off despuÃ©s de 3 segundos (seguridad)

**GRAND MASTER:**
- Slider horizontal grande
- Controla dimmer de TODOS los fixtures
- Si estÃ¡ a 0%, nada brilla (ni AI ni Manual)
- Valor por defecto: 100%

**IPC:**
```typescript
// Quick Actions
await window.electron.invoke('lux:effects:trigger', { 
  effect: 'strobe', 
  duration: 3000 
})

// Grand Master
await window.electron.invoke('lux:arbiter:setGrandMaster', { 
  value: 0.75  // 0-1
})
```

### 1.3 STATUS BAR (Centro-Derecha)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    STATUS          â”‚
â”‚    â”€â”€â”€â”€â”€â”€          â”‚
â”‚                    â”‚
â”‚   BPM: 128  â—      â”‚ â† Punto pulsa con el beat
â”‚                    â”‚
â”‚   ENERGY           â”‚
â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 78%   â”‚ â† Barra de energÃ­a de audio
â”‚                    â”‚
â”‚   ğŸ”¥ FIRE          â”‚ â† Mood actual (emoji + label)
â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Datos:**
- BPM: `truthStore.sensory.beat.bpm`
- Energy: `truthStore.sensory.audio.energy`
- Mood: Derivado de energy (CHILL < 0.4 < VIBE < 0.7 < FIRE)

### 1.4 BLACKOUT MASTER (Derecha - AISLADO)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      â”‚
â”‚         â–             â”‚  â† Icono cuadrado grande
â”‚                      â”‚
â”‚      BLACKOUT        â”‚
â”‚                      â”‚
â”‚      [SPACE]         â”‚  â† Shortcut siempre visible
â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Especificaciones:**
- **TamaÃ±o:** 120x100px mÃ­nimo (ENORME)
- **Color idle:** Rojo oscuro (#330000)
- **Color activo:** Rojo brillante (#FF0000) con glow pulsante
- **PosiciÃ³n:** Extremo derecho, AISLADO del resto
- **Atajo:** SPACE (funciona SIEMPRE, en cualquier contexto)

**IPC:**
```typescript
await window.electron.invoke('lux:arbiter:blackout', true)  // ON
await window.electron.invoke('lux:arbiter:blackout', false) // OFF
```

---

## ğŸ”§ PARTE 2: THE PROGRAMMER (Panel Derecho Contextual)

> **Aparece SOLO cuando hay fixtures seleccionados**

### Layout General
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  THE PROGRAMMER              [Ã—] Close  â”‚ â† Header con contador
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  SELECTION: 4 Movers  [SELECT ALL]      â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â–¼ INTENSITY                    [â†º] â”‚â”‚ â† AcordeÃ³n expandible
â”‚  â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚â”‚    + botÃ³n RELEASE
â”‚  â”‚   0%          65%            100%   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â–¼ COLOR                        [â†º] â”‚â”‚
â”‚  â”‚   [Color Picker HSV]               â”‚â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚   â”‚      Color Wheel            â”‚  â”‚â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â”‚   PALETTES:                        â”‚â”‚
â”‚  â”‚   [ğŸ”¥Fire] [â„ï¸Ice] [ğŸŒˆRGB] [ğŸŒ…Sun] â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â–¼ POSITION                     [â†º] â”‚â”‚
â”‚  â”‚                                     â”‚â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚   â”‚      XY PAD (Absoluto)      â”‚  â”‚â”‚
â”‚  â”‚   â”‚          â—                  â”‚  â”‚â”‚
â”‚  â”‚   â”‚    Pan: 270Â°  Tilt: 45Â°     â”‚  â”‚â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â”‚   [CENTER]                         â”‚â”‚
â”‚  â”‚                                     â”‚â”‚
â”‚  â”‚   PATTERNS:                        â”‚â”‚
â”‚  â”‚   â—‹ Static  â— Circle  â—‹ Eight      â”‚â”‚
â”‚  â”‚   Speed: â”œâ”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚â”‚
â”‚  â”‚   Size:  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚â”‚
â”‚  â”‚                                     â”‚â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€ RADAR (Grupo) â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚   â”‚    Â·    Â·    â—    Â·    Â·    â”‚  â”‚â”‚
â”‚  â”‚   â”‚       Centro + Fan          â”‚  â”‚â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â”‚   Fan: â”œâ”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚â”‚
â”‚  â”‚                                     â”‚â”‚
â”‚  â”‚   PRECISION:                       â”‚â”‚
â”‚  â”‚   Pan:  [  270  ]Â°                 â”‚â”‚
â”‚  â”‚   Tilt: [   45  ]Â°                 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â–¼ BEAM                         [â†º] â”‚â”‚
â”‚  â”‚   Gobo:  â”œâ”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 2  â”‚â”‚
â”‚  â”‚   Prism: [ON] Rot: â”œâ”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”¤    â”‚â”‚
â”‚  â”‚   Focus: â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”¤ 75%â”‚â”‚
â”‚  â”‚   Zoom:  â”œâ”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 40%â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â–¶ SCENES                           â”‚â”‚ â† Colapsado por defecto
â”‚  â”‚   "Coming Soon: Timecoder"         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  [ğŸ”“ RELEASE ALL]        [ğŸ“Œ LOCK]     â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.1 INTENSITY Section

```typescript
interface IntensityPayload {
  fixtureIds: number[]
  values: { dimmer: number }  // 0-255
  channels: ['dimmer']
}

// Al mover slider:
await window.electron.invoke('lux:arbiter:setManual', {
  fixtureIds: selectedFixtures,
  values: { dimmer: Math.round(sliderValue * 255) },
  channels: ['dimmer']
})

// Al hacer click en [â†º] Release:
await window.electron.invoke('lux:arbiter:clearManual', {
  fixtureIds: selectedFixtures,
  channels: ['dimmer']
})
```

### 2.2 COLOR Section

**Componentes:**
1. **Color Picker HSV:** Wheel + Saturation/Value sliders
2. **Palette Buttons:** Presets rÃ¡pidos

```typescript
// Al cambiar color:
await window.electron.invoke('lux:arbiter:setManual', {
  fixtureIds: selectedFixtures,
  values: { 
    red: r,      // 0-255
    green: g,    // 0-255
    blue: b,     // 0-255
    // white: w  // Si el fixture lo soporta
  },
  channels: ['red', 'green', 'blue']
})

// Palettes predefinidas:
const PALETTES = {
  fire:    { red: 255, green: 60, blue: 0 },
  ice:     { red: 0, green: 180, blue: 255 },
  rgb:     { /* cycling - pattern */ },
  sunset:  { red: 255, green: 100, blue: 50 },
}
```

### 2.3 POSITION Section (LA IMPORTANTE)

**Tres niveles de control:**

#### A) XY PAD - El Francotirador
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Â·   Â·   Â·   Â·   Â·   Â·   Â· â”‚
â”‚  Â·   Â·   Â·   Â·   Â·   Â·   Â· â”‚
â”‚  Â·   Â·   Â·   â—   Â·   Â·   Â· â”‚  â† Bolita arrastrable
â”‚  Â·   Â·   Â·   Â·   Â·   Â·   Â· â”‚
â”‚  Â·   Â·   Â·   Â·   Â·   Â·   Â· â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   Pan: 270Â°     Tilt: 45Â°
         [CENTER]
```

**Comportamiento:**
- **1 fixture seleccionado:** Mueve ese fixture directamente
- **N fixtures seleccionados:** Mueve TODOS al mismo punto (unÃ­sono)
- Rango: Pan 0-540Â°, Tilt 0-270Â°

```typescript
// Al arrastrar:
await window.electron.invoke('lux:arbiter:setManual', {
  fixtureIds: selectedFixtures,
  values: { 
    pan: panValue,    // 0-65535 (16-bit)
    tilt: tiltValue   // 0-65535 (16-bit)
  },
  channels: ['pan', 'tilt']
})
```

#### B) PATTERNS - Movimiento Procedural
```
PATTERNS:
â—‹ Static   â— Circle   â—‹ Eight   â—‹ Sweep

Speed: â”œâ”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0.5
Size:  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0.8
```

**ImplementaciÃ³n en Arbiter:**
```typescript
// El Arbiter EXTIENDE su Layer1 para soportar patterns
interface ManualOverride {
  values: Record<string, number>
  channels: string[]
  // NUEVO:
  pattern?: {
    type: 'circle' | 'eight' | 'sweep'
    speed: number   // 0-1
    size: number    // 0-1
    center: { pan: number, tilt: number }
  }
}

// Cuando hay pattern activo, el Arbiter calcula frame a frame:
if (override.pattern) {
  const phase = (Date.now() * override.pattern.speed) % (2 * Math.PI)
  const offset = calculatePatternOffset(override.pattern, phase)
  values.pan = override.pattern.center.pan + offset.pan
  values.tilt = override.pattern.center.tilt + offset.tilt
}
```

**IPC:**
```typescript
await window.electron.invoke('lux:arbiter:setManual', {
  fixtureIds: selectedFixtures,
  pattern: {
    type: 'circle',
    speed: 0.5,
    size: 0.8,
    center: { pan: currentPan, tilt: currentTilt }
  },
  channels: ['pan', 'tilt']
})
```

#### C) RADAR - El Comandante de Grupos
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Â·         Â·            â”‚
â”‚          â—                  â”‚ â† Centro del grupo
â”‚    Â·           Â·            â”‚
â”‚        Â·   Â·                â”‚ â† Puntos = fixtures del grupo
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   Fan: â”œâ”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         0%     60%     100%
```

**Comportamiento:**
- Mueve el "centro de gravedad" de la formaciÃ³n
- **Fan slider:** Expande/contrae la distribuciÃ³n espacial
- Los fixtures mantienen su posiciÃ³n RELATIVA entre sÃ­

```typescript
// Radar mueve el centro, cada fixture calcula su offset
await window.electron.invoke('lux:arbiter:setGroupCenter', {
  fixtureIds: selectedFixtures,
  center: { pan: centerPan, tilt: centerTilt },
  fan: fanValue  // 0-1, multiplica los offsets individuales
})
```

#### D) PRECISION SLIDERS - El Cirujano
```
PRECISION:
Pan:  [  270  ]Â°   â† Input numÃ©rico editable
Tilt: [   45  ]Â°   â† Para valores exactos
```

### 2.4 BEAM Section (NUEVO)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–¼ BEAM                         [â†º] â”‚
â”‚                                     â”‚
â”‚   Gobo:   â”œâ”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚           0  2              7       â”‚  â† Slider con steps
â”‚                                     â”‚
â”‚   Prism:  [ON]  Rotation:           â”‚
â”‚           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚           0%              100%      â”‚
â”‚                                     â”‚
â”‚   Focus:  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚           Near    75%      Far      â”‚
â”‚                                     â”‚
â”‚   Zoom:   â”œâ”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚           Spot   40%      Flood     â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Canales:**
```typescript
await window.electron.invoke('lux:arbiter:setManual', {
  fixtureIds: selectedFixtures,
  values: { 
    gobo: goboIndex * 32,        // 0-255 (8 gobos = 32 cada uno)
    prism: prismActive ? 255 : 0,
    prismRotation: rotation,     // 0-255
    focus: focusValue,           // 0-255
    zoom: zoomValue              // 0-255
  },
  channels: ['gobo', 'prism', 'prismRotation', 'focus', 'zoom']
})
```

### 2.5 SCENES Tab (Placeholder)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–¶ SCENES                           â”‚
â”‚                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                             â”‚  â”‚
â”‚   â”‚    ğŸ¬ COMING SOON           â”‚  â”‚
â”‚   â”‚                             â”‚  â”‚
â”‚   â”‚    Timecoder & Scene        â”‚  â”‚
â”‚   â”‚    Recorder                 â”‚  â”‚
â”‚   â”‚                             â”‚  â”‚
â”‚   â”‚    WAVE 380+                â”‚  â”‚
â”‚   â”‚                             â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âŒ¨ï¸ KEYBOARD SHORTCUTS

| Tecla | AcciÃ³n | Contexto |
|-------|--------|----------|
| `SPACE` | Toggle Blackout | **SIEMPRE** funciona |
| `ESC` | Release All Manual | Global - pÃ¡nico suave |
| `1` | Toggle Strobe | Command Deck |
| `2` | Toggle Blinder | Command Deck |
| `3` | Toggle Smoke | Command Deck |
| `F11` o `Z` | Toggle Zen Mode | Global |
| `TAB` | Siguiente secciÃ³n Programmer | Cuando Programmer abierto |
| `Shift+TAB` | SecciÃ³n anterior | Cuando Programmer abierto |
| `C` | Abrir/Cerrar COLOR | Quick access |
| `P` | Abrir/Cerrar POSITION | Quick access |
| `B` | Abrir/Cerrar BEAM | Quick access |

---

## ğŸ”Œ EXTENSIONES AL ARBITER

### Nuevos IPC Handlers necesarios:

```typescript
// handlers/arbiterHandlers.ts - EXTENSIONES

// 1. Grand Master (nuevo)
ipcMain.handle('lux:arbiter:setGrandMaster', async (_, { value }) => {
  masterArbiter.setGrandMaster(value)  // 0-1, multiplica TODO
})

// 2. Pattern support (extensiÃ³n de setManual)
ipcMain.handle('lux:arbiter:setManual', async (_, payload) => {
  // payload puede incluir .pattern para movimiento procedural
  if (payload.pattern) {
    masterArbiter.setPatternOverride(payload.fixtureIds, payload.pattern)
  } else {
    masterArbiter.setManualOverride(payload.fixtureIds, payload.values, payload.channels)
  }
})

// 3. Group center (nuevo)
ipcMain.handle('lux:arbiter:setGroupCenter', async (_, { fixtureIds, center, fan }) => {
  masterArbiter.setGroupFormation(fixtureIds, center, fan)
})

// 4. Status extendido
ipcMain.handle('lux:arbiter:status', async () => {
  return {
    blackout: masterArbiter.isBlackout(),
    grandMaster: masterArbiter.getGrandMaster(),
    activeOverrides: masterArbiter.getActiveOverrides(),
    activePatterns: masterArbiter.getActivePatterns()
  }
})
```

### MasterArbiter - Extensiones:

```typescript
class MasterArbiter {
  private grandMaster: number = 1.0
  private patterns: Map<number, PatternConfig> = new Map()
  
  setGrandMaster(value: number) {
    this.grandMaster = Math.max(0, Math.min(1, value))
  }
  
  setPatternOverride(fixtureIds: number[], pattern: PatternConfig) {
    for (const id of fixtureIds) {
      this.patterns.set(id, pattern)
      // Los patterns tambiÃ©n son overrides de Layer1
      this.layer1.set(id, { 
        channels: new Set(['pan', 'tilt']),
        pattern 
      })
    }
  }
  
  // En el loop de merge (60fps):
  private calculatePatternValues(fixtureId: number, phase: number): Partial<FixtureValues> {
    const pattern = this.patterns.get(fixtureId)
    if (!pattern) return {}
    
    const amplitude = pattern.size * 0.3  // 30% max swing
    let panOffset = 0, tiltOffset = 0
    
    switch (pattern.type) {
      case 'circle':
        panOffset = Math.cos(phase) * amplitude
        tiltOffset = Math.sin(phase) * amplitude
        break
      case 'eight':
        panOffset = Math.sin(phase) * amplitude
        tiltOffset = Math.sin(phase * 2) * amplitude * 0.5
        break
      case 'sweep':
        panOffset = Math.sin(phase) * amplitude
        tiltOffset = 0
        break
    }
    
    return {
      pan: pattern.center.pan + panOffset * 65535,
      tilt: pattern.center.tilt + tiltOffset * 65535
    }
  }
}
```

---

## ğŸ“‹ PLAN DE EJECUCIÃ“N (Fases)

### **FASE 1: Layout & Zen Mode**
1. Modificar `MainLayout.tsx` - aÃ±adir estado `isZenMode`
2. Modificar `TitleBar.tsx` - aÃ±adir botÃ³n toggle `[â›¶]`
3. CSS para transiciÃ³n suave de sidebar
4. Keyboard listener para F11/Z

### **FASE 2: Command Deck**
1. Crear `CommandDeck.tsx` (reemplaza GlobalEffectsBar)
2. Crear `LayerIndicator.tsx`
3. Crear `QuickActions.tsx` (Strobe, Blinder, Smoke)
4. Crear `StatusBar.tsx` (BPM, Energy, Mood)
5. Crear `BlackoutButton.tsx` (el grande)
6. Crear `GrandMasterSlider.tsx`
7. CSS cyberpunk con glows

### **FASE 3: The Programmer - BÃ¡sico**
1. Crear `TheProgrammer.tsx` (contenedor acordeÃ³n)
2. Crear `IntensitySection.tsx`
3. Crear `ColorSection.tsx` (picker + palettes)
4. Conectar a Arbiter via IPC
5. Botones RELEASE por secciÃ³n

### **FASE 4: The Programmer - Position**
1. Refactorizar `PanTiltControl.tsx` â†’ `XYPad.tsx`
2. Crear `PatternSelector.tsx`
3. Crear `GroupRadar.tsx` (rescatar visual de MovementRadar)
4. Crear `PrecisionInputs.tsx`
5. Conectar patterns al Arbiter

### **FASE 5: The Programmer - Beam**
1. Crear `BeamSection.tsx`
2. Gobo slider con steps
3. Prism toggle + rotation
4. Focus/Zoom sliders

### **FASE 6: Arbiter Extensions**
1. Implementar `grandMaster` en MasterArbiter
2. Implementar pattern calculation loop
3. Nuevos IPC handlers
4. Tests E2E para patterns

### **FASE 7: Cleanup**
1. Eliminar archivos obsoletos (Blackout.tsx, GlobalEffectsBar.tsx, MovementRadar.tsx)
2. Eliminar dependencias de overrideStore en UI
3. DocumentaciÃ³n actualizada

---

## ğŸ“ ARCHIVOS FINALES

### **CREAR:**
```
src/components/
â”œâ”€â”€ commandDeck/
â”‚   â”œâ”€â”€ CommandDeck.tsx
â”‚   â”œâ”€â”€ CommandDeck.css
â”‚   â”œâ”€â”€ LayerIndicator.tsx
â”‚   â”œâ”€â”€ QuickActions.tsx
â”‚   â”œâ”€â”€ StatusBar.tsx
â”‚   â”œâ”€â”€ BlackoutButton.tsx
â”‚   â””â”€â”€ GrandMasterSlider.tsx
â”‚
â”œâ”€â”€ programmer/
â”‚   â”œâ”€â”€ TheProgrammer.tsx
â”‚   â”œâ”€â”€ TheProgrammer.css
â”‚   â”œâ”€â”€ sections/
â”‚   â”‚   â”œâ”€â”€ IntensitySection.tsx
â”‚   â”‚   â”œâ”€â”€ ColorSection.tsx
â”‚   â”‚   â”œâ”€â”€ PositionSection.tsx
â”‚   â”‚   â”œâ”€â”€ BeamSection.tsx
â”‚   â”‚   â””â”€â”€ ScenesPlaceholder.tsx
â”‚   â””â”€â”€ controls/
â”‚       â”œâ”€â”€ XYPad.tsx
â”‚       â”œâ”€â”€ GroupRadar.tsx
â”‚       â”œâ”€â”€ PatternSelector.tsx
â”‚       â”œâ”€â”€ PaletteButtons.tsx
â”‚       â””â”€â”€ PrecisionInputs.tsx
```

### **MODIFICAR:**
```
src/components/layout/
â”œâ”€â”€ MainLayout.tsx      â† AÃ±adir isZenMode
â”œâ”€â”€ TitleBar.tsx        â† AÃ±adir toggle button
â””â”€â”€ MainLayout.css      â† Transiciones

src/core/
â””â”€â”€ MasterArbiter.ts    â† grandMaster + patterns

src/handlers/
â””â”€â”€ arbiterHandlers.ts  â† Nuevos IPC
```

### **ELIMINAR:**
```
src/components/
â”œâ”€â”€ Blackout.tsx                    â† Duplicado
â”œâ”€â”€ layout/GlobalEffectsBar.tsx     â† Reemplazado
â”œâ”€â”€ layout/GlobalEffectsBar.css     
â””â”€â”€ views/StageViewDual/sidebar/
    â”œâ”€â”€ widgets/MovementRadar.tsx   â† Rescatado en GroupRadar
    â”œâ”€â”€ GlobalControls.tsx          â† Obsoleto
    â””â”€â”€ PaletteControlMini.tsx      â† Integrado en ColorSection
```

---

## âœ… CRITERIOS DE Ã‰XITO

1. **Blackout en <50ms** desde cualquier estado
2. **Zen Mode toggle instantÃ¡neo** (sin re-render pesado)
3. **Grand Master afecta TODO** en tiempo real
4. **Patterns a 60fps** sin lag de IPC
5. **Release funciona** con crossfade suave
6. **Zero uso de overrideStore** para controles manuales
7. **Keyboard shortcuts** funcionan en cualquier contexto
8. **UI responsive** en pantallas 1920x1080 hasta 4K

---

## ğŸš€ LISTO PARA REVISIÃ“N FINAL

Radwulf, este es el blueprint definitivo. Incluye:

- âœ… Zen Mode (0px total)
- âœ… Command Deck 140px con efectos GLOBALES
- âœ… Quick Actions filtradas (Strobe, Blinder, Smoke)
- âœ… Grand Master que controla TODO
- âœ… XY Pad mantenido (el francotirador)
- âœ… Radar rescatado (el comandante de grupos)
- âœ… Patterns con cÃ¡lculo en Arbiter (60fps)
- âœ… BEAM section nueva
- âœ… SCENES placeholder
- âœ… Todos los shortcuts definidos
- âœ… Plan de ejecuciÃ³n en 7 fases

**Â¿Aprobado para ejecuciÃ³n?** ğŸ”¥

---

*PunkOpus - El cÃ³digo que respira bajo las luces* ğŸ›ï¸âœ¨
