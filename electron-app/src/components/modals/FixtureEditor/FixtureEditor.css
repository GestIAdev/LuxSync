/* FixtureEditor.css - HIGH CONTRAST / VISIBLE CARDS */

/* --- 1. OVERLAY & MODAL --- */
.fixture-editor-overlay {
  position: fixed !important;
  top: 0; left: 0; width: 100vw; height: 100vh;
  background-color: rgba(0, 0, 0, 0.95);
  backdrop-filter: blur(8px);
  z-index: 99999;
  display: flex; justify-content: center; align-items: center;
  isolation: isolate;
  animation: fadeIn 0.2s ease-out;
}

.fixture-editor-window {
  width: 95vw; height: 90vh; max-width: 1600px;
  background-color: #09090b; /* Fondo General */
  border: 1px solid #00f3ff;
  border-radius: 8px;
  display: flex; flex-direction: column;
  box-shadow: 0 0 80px rgba(0, 243, 255, 0.15);
  overflow: hidden;
  font-family: 'Segoe UI', sans-serif;
  color: #fff;
}

/* --- 2. HEADER --- */
.forge-header {
  padding: 1.5rem; background: #0f0f13; border-bottom: 1px solid #333;
  display: flex; gap: 1.5rem; align-items: flex-end;
}

.forge-input-group { display: flex; flex-direction: column; gap: 0.5rem; flex: 1; }
.forge-label { color: #00f3ff; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }

.forge-input, .forge-select {
  background: #1a1a1a; border: 1px solid #444; padding: 12px; color: white;
  border-radius: 4px; font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;
}
.forge-input:focus, .forge-select:focus { border-color: #00f3ff; outline: none; }
.forge-select option { background-color: #000; }

.close-icon-btn {
  background: none; border: none; color: #666; cursor: pointer; padding: 5px;
  display: flex; align-items: center; justify-content: center;
}
.close-icon-btn:hover { color: #ff0055; }

/* --- 3. BODY & RACK --- */
.forge-body { display: flex; flex: 1; overflow: hidden; position: relative; }

.rack-area {
  flex: 3; padding: 2rem;
  background-color: #000000; /* NEGRO ABSOLUTO */
  border-right: 1px solid #333;
  overflow-y: auto;
}

.section-title {
  display: flex; align-items: center; gap: 10px;
  font-size: 1.2rem; font-weight: 800; color: #fff;
  margin-bottom: 20px; text-transform: uppercase; letter-spacing: 2px;
}

.rack-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 1.5rem; padding-bottom: 2rem;
}

/* --- 4. LAS TARJETAS (AQUÍ ESTÁ EL CAMBIO) --- */
.dmx-slot {
  /* Fondo GRIS MEDIO (No negro) para que contraste con el fondo */
  background-color: #18181b; 
  /* Borde GRIS CLARO para definir la caja */
  border: 1px solid #3f3f46; 
  border-radius: 6px;
  padding: 1.2rem;
  display: flex; flex-direction: column; gap: 1rem;
  transition: all 0.2s;
  position: relative;
  /* Sombra para levantarla del fondo */
  box-shadow: 0 4px 6px rgba(0,0,0,0.3);
}

.dmx-slot:hover {
  border-color: #00f3ff; /* Borde Cyan al pasar ratón */
  transform: translateY(-2px);
  background-color: #202025;
}

.dmx-slot.active { border-color: #00f3ff; box-shadow: 0 0 15px rgba(0,243,255,0.1); }
.dmx-slot.drag-over { border-color: #bf00ff; background: rgba(191,0,255,0.1); }

.slot-header {
  font-family: 'JetBrains Mono', monospace;
  color: #a1a1aa; font-size: 0.75rem;
  display: flex; justify-content: space-between; align-items: center;
}

/* ZONA DE DROP - GESTIÓN DEL TEXTO */
.slot-dropzone {
  flex: 1; min-height: 50px;
  border-radius: 4px;
  display: flex; align-items: center; justify-content: center;
  font-weight: 800; font-size: 0.8rem; letter-spacing: 1px;
  text-transform: uppercase;
  
  /* ESTADO VACÍO (DROP HERE) */
  background: transparent; 
  border: 1px dashed #333;
  color: #444; /* Texto oscuro para que no moleste */
}

/* ESTADO CON FUNCIÓN (DIMMER, RED, ETC) */
.slot-dropzone.has-function {
  border-style: solid;
  border-color: var(--slot-color, #00f3ff);
  background: rgba(0,0,0,0.5); /* Fondo semitransparente */
  color: #fff; /* Texto blanco brillante */
  text-shadow: 0 0 10px var(--slot-color);
}

/* INPUTS */
.slot-input-name {
  background: transparent; border: none;
  border-bottom: 1px solid #444;
  color: #fff; padding: 8px 0; width: 100%;
  font-size: 1rem; font-weight: 600; font-family: 'Segoe UI', sans-serif;
}
.slot-input-name:focus { outline: none; border-bottom-color: #00f3ff; }

.slot-footer {
  display: flex; align-items: center; justify-content: space-between; margin-top: 5px;
}

.slot-input-val {
  background: #000 !important;
  border: 1px solid #444 !important;
  color: #00f3ff !important;
  width: 60px; padding: 5px; text-align: center; border-radius: 4px;
  font-family: monospace; font-weight: bold;
}
.slot-input-val:focus { border-color: #00f3ff !important; outline: none; }

.slot-clear-btn { background: none; border: none; color: #666; cursor: pointer; }
.slot-clear-btn:hover { color: #ff4444; }

/* --- 5. FOUNDRY --- */
.foundry-area {
  flex: 1; min-width: 320px; max-width: 380px;
  background: #0a0a0c; border-left: 1px solid #bf00ff;
  display: flex; flex-direction: column;
}

.foundry-header { padding: 1.5rem; background: #111; border-bottom: 1px solid #333; }
.foundry-title { display: flex; align-items: center; gap: 10px; font-size: 1.1rem; font-weight: 800; text-transform: uppercase; color: #bf00ff; }
.foundry-content { padding: 1.5rem; overflow-y: auto; flex: 1; }

.function-category { margin-bottom: 1.5rem; }
.category-label { color: #666; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 0.8rem; }

/* BOTONES CARTUCHO */
.function-cartridge {
  display: flex; align-items: center; justify-content: space-between;
  width: 100%; padding: 14px 18px; margin-bottom: 12px;
  background-color: #161618 !important; /* GRIS OSCURO */
  border: 1px solid #333; border-left: 5px solid var(--cartridge-color) !important;
  border-radius: 4px;
  color: #fff !important; font-family: 'JetBrains Mono', monospace; font-weight: 700; font-size: 0.85rem;
  cursor: grab; transition: transform 0.1s;
}
.function-cartridge:hover {
  transform: translateX(-5px); background-color: #26262a !important;
  box-shadow: -10px 0 20px -5px var(--cartridge-color); border-color: #666;
}
.function-cartridge:active { cursor: grabbing; transform: scale(0.98); }
.function-cartridge.dragging { opacity: 0.5; }

.cartridge-icon { font-size: 1.1rem; display: flex; align-items: center; }
.cartridge-label { flex: 1; text-align: left; margin-left: 12px; }

/* --- 6. FOOTER --- */
.forge-footer {
  padding: 1.5rem; background: #0f0f13; border-top: 1px solid #222;
  display: flex; justify-content: flex-end; align-items: center; gap: 1rem;
}

.validation-message { color: #666; font-size: 0.85rem; margin-right: auto; font-style: italic; }
.validation-message.valid { color: #0f0; }
.validation-message.invalid { color: #ff4444; }

.btn-cancel {
  background: transparent; border: 1px solid #444; color: #fff;
  padding: 12px 24px; border-radius: 4px; cursor: pointer; font-weight: 600;
  transition: all 0.2s;
}
.btn-cancel:hover { border-color: #fff; }

.btn-save {
  background: #00f3ff; color: #000; border: none; padding: 12px 24px;
  border-radius: 4px; font-weight: 800; cursor: pointer;
  display: flex; align-items: center; gap: 8px;
  box-shadow: 0 0 20px rgba(0,243,255,0.2);
  transition: all 0.2s;
}
.btn-save:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 0 30px rgba(0,243,255,0.4); }
.btn-save:disabled { background: #222; color: #555; cursor: not-allowed; box-shadow: none; }

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }